<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2019-02-07 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  
<!-- Mirrored from ninja.allexample.com/configuration_and_modes.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 14 Oct 2019 15:10:03 GMT -->
<head>
    <meta charset=utf-8"UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20190207" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Ninja - Configuration and modes</title>
    <link rel="stylesheet" href="apache-maven-fluido-1.3.1.min.css" tppabs="../www.ninjaframework.org/css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="site.css" tppabs="../www.ninjaframework.org/css/site.css" />
    <link rel="stylesheet" href="print.css" tppabs="http://www.ninjaframework.org/css/print.css" media="print" />

      
    <script type="text/javascript" src="apache-maven-fluido-1.3.1.min.js" tppabs="../www.ninjaframework.org/js/apache-maven-fluido-1.3.1.min.js"></script>

                          
        
<meta name="description" content="Ninja is a full stack web framework for Java.                     Rock solid, fast and super productive."/>
                      
        
<link rel="icon" href="favicon.html" type="image/png"/>
                      
        
<link rel="stylesheet" href="css-family%3dTitillium%2bWeb.css" tppabs="http://fonts.googleapis.com/css?family=Titillium+Web" type="text/css"/>
                      
        
<link rel="stylesheet" href="css-family%3dInconsolata.css" tppabs="http://fonts.googleapis.com/css?family=Inconsolata" type="text/css"/>
                      
        
<link rel="stylesheet" href="font-awesome.min.css" tppabs="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" type="text/css"/>
                      
        
<script type="text/javascript">var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-38154034-1']);
                _gaq.push(['_trackPageview']);

                (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www/') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();</script>
          
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="javascript:if(confirm('http://github.com/ninjaframework/ninja  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://github.com/ninjaframework/ninja'" tppabs="http://github.com/ninjaframework/ninja">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="forkme_right_gray_6d6d6d.png" tppabs="../s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="index.html" tppabs="http://www.ninjaframework.org/.." id="bannerLeft" title="Ninja web framework">
                                                                                                <img src="ninja_logo.png" tppabs="http://www.ninjaframework.org/ninja_logo.png"  alt="Ninja web framework"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
            
                
                    
                  <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2019-02-07</li>
              <li id="projectVersion" class="pull-right">
                    Version: 6.4.2
        </li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Introduction</li>
                              
      <li>
  
                          <a href="introduction.html" tppabs="http://www.ninjaframework.org/introduction.html" title="The problem we solve">
          <i class="none"></i>
        The problem we solve</a>
            </li>
                
      <li>
  
                          <a href="high_level_overview.html" tppabs="http://www.ninjaframework.org/high_level_overview.html" title="Ninja - high level overview">
          <i class="none"></i>
        Ninja - high level overview</a>
            </li>
                
      <li>
  
                          <a href="team.html" tppabs="http://www.ninjaframework.org/team.html" title="The team">
          <i class="none"></i>
        The team</a>
            </li>
                              <li class="nav-header">Commercial support</li>
                              
      <li>
  
                          <a href="philosophy.html" tppabs="http://www.ninjaframework.org/commercial_support/philosophy.html" title="Philosophy">
          <i class="none"></i>
        Philosophy</a>
            </li>
                
      <li>
  
                          <a href="training.html" tppabs="http://www.ninjaframework.org/commercial_support/training.html" title="Training">
          <i class="none"></i>
        Training</a>
            </li>
                
      <li>
  
                          <a href="support_plans.html" tppabs="http://www.ninjaframework.org/commercial_support/support_plans.html" title="Support plans">
          <i class="none"></i>
        Support plans</a>
            </li>
                
      <li>
  
                          <a href="agile_custom_development.html" tppabs="http://www.ninjaframework.org/commercial_support/agile_custom_development.html" title="Custom development">
          <i class="none"></i>
        Custom development</a>
            </li>
                              <li class="nav-header">Documentation</li>
                                                                                                                    
      <li>
  
                          <a href="installing_ninja.html" tppabs="http://www.ninjaframework.org/documentation/getting_started/installing_ninja.html" title="Getting Started">
          <i class="icon-chevron-right"></i>
        Getting Started</a>
                  </li>
                                                                                                                                                                                                                                    
      <li>
  
                          <a href="basic_concepts.html" tppabs="http://www.ninjaframework.org/documentation/basic_concepts/basic_concepts.html" title="Basic concepts">
          <i class="icon-chevron-right"></i>
        Basic concepts</a>
                  </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>Configuration and modes</a>
          </li>
                                                                                                                        
      <li>
  
                          <a href="getting_started.html" tppabs="http://www.ninjaframework.org/documentation/html_templating/getting_started.html" title="HTML templating">
          <i class="icon-chevron-right"></i>
        HTML templating</a>
                  </li>
                
      <li>
  
                          <a href="working_with_json_jsonp.html" tppabs="http://www.ninjaframework.org/documentation/working_with_json_jsonp.html" title="Working with JSON / JSONP">
          <i class="none"></i>
        Working with JSON / JSONP</a>
            </li>
                
      <li>
  
                          <a href="working_with_xml.html" tppabs="http://www.ninjaframework.org/documentation/working_with_xml.html" title="Working with XML">
          <i class="none"></i>
        Working with XML</a>
            </li>
                              <li class="nav-header">Advanced topics</li>
                              
      <li>
  
                          <a href="websockets.html" tppabs="http://www.ninjaframework.org/documentation/websockets.html" title="Web Sockets">
          <i class="none"></i>
        Web Sockets</a>
            </li>
                
      <li>
  
                          <a href="validation.html" tppabs="http://www.ninjaframework.org/documentation/validation.html" title="Validation">
          <i class="none"></i>
        Validation</a>
            </li>
                
      <li>
  
                          <a href="content_negotiation.html" tppabs="http://www.ninjaframework.org/documentation/content_negotiation.html" title="Content negotiation">
          <i class="none"></i>
        Content negotiation</a>
            </li>
                
      <li>
  
                          <a href="uploading_files.html" tppabs="http://www.ninjaframework.org/documentation/uploading_files.html" title="Uploading files">
          <i class="none"></i>
        Uploading files</a>
            </li>
                
      <li>
  
                          <a href="scheduler.html" tppabs="http://www.ninjaframework.org/documentation/scheduler.html" title="Scheduler">
          <i class="none"></i>
        Scheduler</a>
            </li>
                
      <li>
  
                          <a href="lifecycle.html" tppabs="http://www.ninjaframework.org/documentation/lifecycle.html" title="Lifecycle">
          <i class="none"></i>
        Lifecycle</a>
            </li>
                                                                  
      <li>
  
                          <a href="jpa.html" tppabs="http://www.ninjaframework.org/documentation/working_with_relational_dbs/jpa.html" title="Working with relational DBs">
          <i class="icon-chevron-right"></i>
        Working with relational DBs</a>
                  </li>
                
      <li>
  
                          <a href="using_the_cache.html" tppabs="http://www.ninjaframework.org/documentation/using_the_cache.html" title="Using the cache">
          <i class="none"></i>
        Using the cache</a>
            </li>
                
      <li>
  
                          <a href="internationalization.html" tppabs="http://www.ninjaframework.org/documentation/internationalization.html" title="Internationalization">
          <i class="none"></i>
        Internationalization</a>
            </li>
                
      <li>
  
                          <a href="static_assets.html" tppabs="http://www.ninjaframework.org/documentation/static_assets.html" title="Static assets">
          <i class="none"></i>
        Static assets</a>
            </li>
                
      <li>
  
                          <a href="sending_mail.html" tppabs="http://www.ninjaframework.org/documentation/sending_mail.html" title="Sending mail">
          <i class="none"></i>
        Sending mail</a>
            </li>
                
      <li>
  
                          <a href="logging.html" tppabs="http://www.ninjaframework.org/documentation/logging.html" title="Logging">
          <i class="none"></i>
        Logging</a>
            </li>
                
      <li>
  
                          <a href="custom_routing.html" tppabs="http://www.ninjaframework.org/documentation/custom_routing.html" title="Custom routing">
          <i class="none"></i>
        Custom routing</a>
            </li>
                
      <li>
  
                          <a href="servlet_bridge.html" tppabs="http://www.ninjaframework.org/documentation/servlet_bridge.html" title="Servlet bridge">
          <i class="none"></i>
        Servlet bridge</a>
            </li>
                
      <li>
  
                          <a href="console.html" tppabs="http://www.ninjaframework.org/documentation/console.html" title="Console application">
          <i class="none"></i>
        Console application</a>
            </li>
                                                                                                                                                            
      <li>
  
                          <a href="getting_started-1.html" tppabs="http://www.ninjaframework.org/documentation/testing_your_application/getting_started.html" title="Testing">
          <i class="icon-chevron-right"></i>
        Testing</a>
                  </li>
                
      <li>
  
                          <a href="debugging.html" tppabs="http://www.ninjaframework.org/documentation/debugging.html" title="Debugging">
          <i class="none"></i>
        Debugging</a>
            </li>
                
      <li>
  
                          <a href="getting_started-2.html" tppabs="http://www.ninjaframework.org/documentation/security/getting_started.html" title="Security">
          <i class="none"></i>
        Security</a>
            </li>
                                                                                                                        
      <li>
  
                          <a href="getting_started-3.html" tppabs="http://www.ninjaframework.org/documentation/deployment/getting_started.html" title="Deployment">
          <i class="icon-chevron-right"></i>
        Deployment</a>
                  </li>
                
      <li>
  
                          <a href="upgrade_guide.html" tppabs="http://www.ninjaframework.org/documentation/upgrade_guide.html" title="Upgrade guide">
          <i class="none"></i>
        Upgrade guide</a>
            </li>
                
      <li>
  
                          <a href="index-2.html" tppabs="http://www.ninjaframework.org/apidocs/index.html" title="API docs (JavaDoc)">
          <i class="none"></i>
        API docs (JavaDoc)</a>
            </li>
                              <li class="nav-header">Ninja Modules</li>
                              
      <li>
  
                          <a href="modules.html" tppabs="http://www.ninjaframework.org/documentation/modules.html" title="Overview">
          <i class="none"></i>
        Overview</a>
            </li>
                              <li class="nav-header">Great community</li>
                              
      <li>
  
                          <a href="javascript:if(confirm('https://twitter.com/ninjaframework  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='https://twitter.com/ninjaframework'" tppabs="https://twitter.com/ninjaframework" class="externalLink" title="@ninjaframework">
          <i class="none"></i>
        @ninjaframework</a>
            </li>
                
      <li>
  
                          <a href="javascript:if(confirm('https://groups.google.com/d/forum/ninja-framework  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='https://groups.google.com/d/forum/ninja-framework'" tppabs="https://groups.google.com/d/forum/ninja-framework" class="externalLink" title="Mailing list">
          <i class="none"></i>
        Mailing list</a>
            </li>
                
      <li>
  
                          <a href="javascript:if(confirm('https://github.com/ninjaframework/ninja  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='https://github.com/ninjaframework/ninja'" tppabs="https://github.com/ninjaframework/ninja" class="externalLink" title="Source code">
          <i class="none"></i>
        Source code</a>
            </li>
                
      <li>
  
                          <a href="javascript:if(confirm('https://github.com/ninjaframework/ninja/issues  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='https://github.com/ninjaframework/ninja/issues'" tppabs="https://github.com/ninjaframework/ninja/issues" class="externalLink" title="Bug tracker">
          <i class="none"></i>
        Bug tracker</a>
            </li>
                
      <li>
  
                          <a href="security.html" tppabs="http://www.ninjaframework.org/security.html" title="Security issues">
          <i class="none"></i>
        Security issues</a>
            </li>
                              <li class="nav-header">For developers</li>
                              
      <li>
  
                          <a href="changelog.html" tppabs="http://www.ninjaframework.org/developer/changelog.html" title="Changelog">
          <i class="none"></i>
        Changelog</a>
            </li>
                
      <li>
  
                          <a href="roadmap.html" tppabs="http://www.ninjaframework.org/developer/roadmap.html" title="Roadmap">
          <i class="none"></i>
        Roadmap</a>
            </li>
                
      <li>
  
                          <a href="getting_started-4.html" tppabs="http://www.ninjaframework.org/developer/getting_started.html" title="How to contribute">
          <i class="none"></i>
        How to contribute</a>
            </li>
            </ul>
                
                    
                            <form id="search-form" action="http://www.google.com/search" method="get" >
    
  <input value="http://www.ninjaframework.org" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="brand-form%3dsearch-form.html" tppabs="http://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="plusone.html" tppabs="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="javascript:if(confirm('http://www.ninjaframework.org/ninja-core  \n\n该文件无法用 Teleport Ultra 下载, 因为 服务器报告该文件未找到。  \n\n你想在服务器上打开它?'))window.location='http://www.ninjaframework.org/ninja-core'" tppabs="http://www.ninjaframework.org/ninja-core" data-size="tall" ></div>

                   <div class="clear"></div>
                            <div class="clear"></div>
               
        
        
        <div id="twitter">
    
    <a href="javascript:if(confirm('https://twitter.com/ninjaframework  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='https://twitter.com/ninjaframework'" tppabs="https://twitter.com/ninjaframework" class="twitter-follow-button" data-show-count="true" data-align="left" data-size="medium" data-show-screen-name="true" data-lang="en">Follow ninjaframework</a>
    <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="widgets.html"/*tpa=http://platform.twitter.com/widgets.js*/;fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        </div>
                   <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="javascript:if(confirm('http://maven.apache.org/  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://maven.apache.org/'" tppabs="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="maven-feather.png" tppabs="../www.ninjaframework.org/images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Configuration and modes</h1>
<div class="section">
<h2>Configuration<a name="Configuration"></a></h2>
<p>By convention Ninja will look for a configuration file at <tt>conf/application.conf</tt>.</p>
<p><tt>application.conf</tt> is a simple properties file with keys and values. &#x201c;#&#x201d; is a comment.</p>

<div>
<pre class="prettyprint">
# an arbitrary comment
application.name=Ninja demo application
application.cookie.prefix=NINJA
</pre></div>
<p>Like any other Ninja file it is encoded in UTF-8. Make sure your editor reads and saves the file in the correct encoding. </p>
<p>Ninja properties can do much more than traditional Java properties. For instance it is possible to reference other properties by their name and combine them.</p>

<div>
<pre class="prettyprint">
serverName=myserver.com
serverPort=80
fullServerName=${serverName}:${serverPort}
</pre></div>
<p>fullServerName references the previously set values of the keys and will return myserver.com:80.</p>
<p>Inside your application there are two basic ways to access the properties. </p>
<p>First way is to use <tt>NinjaProperties.get(&#x2026;)</tt>. You have to inject NinjaProperties first, then you can use all sorts of methods to retrieve properties.</p>

<div>
<pre class="prettyprint">
@Inject 
NinjaProperties ninjaProperties;

public void myMethod() {
    String value = ninjaProperties.get(&quot;fullServerName&quot;)
    ... do even more...
}
</pre></div>
<p>The second way to get properties is to inject them via @Named(&#x201c;fullServerName&#x201d;).</p>

<div>
<pre class="prettyprint">
/** An arbitrary constructor */
@Inject
ApplicationController(@Named(&quot;fullServerName&quot;) String fullServerName) {
    ... do something ...
}
</pre></div>
<p>By the way. And this is really important: Properties are read and managed by the excellent Apache Configurations library. Please refer to <a class="externalLink" href="javascript:if(confirm('http://commons.apache.org/configuration/  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://commons.apache.org/configuration/'" tppabs="http://commons.apache.org/configuration/">their manual</a> for even more information on advanced usage.</p></div>
<div class="section">
<h2>Configuring the modes<a name="Configuring_the_modes"></a></h2>
<p>Ninja uses three predefined modes (<tt>test</tt>, <tt>dev</tt> and <tt>prod</tt> as defined in <tt>NinjaConstant.java</tt>). If no mode is set explicitly Ninja will use the <tt>prod</tt> mode. That means if you deploy Ninja via a war file to an arbitrary servlet container Ninja will use the prod mode.</p>
<p>Ninja&#x2019;s SuperDevMode will set the mode to <tt>dev</tt>. And Ninja&#x2019;s testcases will use mode <tt>test</tt> by default.</p>
<p>You can set the modes by setting the Java system property <tt>ninja.mode</tt>.</p>

<div>
<pre class="prettyprint">
On the command line:
&gt; java -Dninja.mode=dev

Or programmatically:
System.setProperty(NinjaConstant.MODE_KEY_NAME, NinjaConstant.MODE_DEV)
</pre></div>
<p>Make sure that you set the system property early so that Ninja knows its mode from the very beginning.</p>
<p>These modes are handy if you want to define different properties for different environments. You may want to use database1 when running tests and database2 when developing and database3 when running in production.</p>
<p>Ninja supports that use case by using a mode prefix prior to your property key.</p>

<div>
<pre class="prettyprint">
database.name=database_production   # will be used when no mode is set (or prod)
%prod.database.name=database_prod   # will be used when running in prod mode
%dev.database.name=database_dev     # will be used when running in dev mode
%test.database.name=database_test   # will be used when running in test mode
</pre></div>
<p>The convention is to use a &#x201c;%&#x201d; and the name of the mode followed by &#x201c;.&#x201d;.</p></div>
<div class="section">
<h2>HTTPS (SSL) support<a name="HTTPS_SSL_support"></a></h2>
<p>As of version 5.2.3, Ninja supports basic HTTPS (SSL) in both standalone and SuperDevMode. While other methods of handling SSL in production (e.g. nginx) are highly recommended, its convenient to use Ninja&#x2019;s builtin support during development, testing, or light production use.</p>
<p>Ninja ships with a self-signed SSL certificate that is configured by default in either <tt>dev</tt> or <tt>test</tt> modes. To enable SSL in either <tt>dev</tt> or <tt>test</tt> mode you&#x2019;ll simply need to set the port you&#x2019;d like to start an HTTPS server on.</p>

<div>
<pre class="prettyprint">
ninja.ssl.port=8443
</pre></div>
<p>This can be accomplished by either adding this to your <tt>conf/application.conf</tt> configuration file or on the command line when you run Ninja&#x2019;s maven plugin</p>

<div>
<pre class="prettyprint">
mvn ninja:run -Dninja.ssl.port=8443
</pre></div>
<p>Ninja supports running both HTTP and HTTPS connectors at the same time. If you&#x2019;d like to only run HTTPS, simply set <tt>ninja.port</tt> to -1 to disable it.</p>

<div>
<pre class="prettyprint">
ninja.port=-1               # disable clear text http connector
ninja.ssl.port=8443         # enable ssl https connector
</pre></div>
<p>The SSL keystore and truststore values can be configured as well. The uri values may either be a classpath resource in the format <tt>classpath:resourceName</tt> or any other valid Java URL value since under-the-hood <tt>URL.openStream()</tt> is used. Please note that in dev and test mode the default keystore is <tt>classpath:/ninja/standalone/ninja-development.keystore</tt> and the default truststore is <tt>classpath:/ninja/standalone/ninja-development.truststore</tt></p>

<div>
<pre class="prettyprint">
ninja.ssl.keystore.uri=file:///var/etc/mysite.keystore
ninja.ssl.keystore.password=changeit
ninja.ssl.truststore.uri=file:///var/etc/mysite.truststore
ninja.ssl.truststore.password=changeit
</pre></div></div>
<div class="section">
<h2>Disabling diagnostic mode<a name="Disabling_diagnostic_mode"></a></h2>
<p>As of version 4.0.7, Ninja features a new diagnostic extension to dev mode where detailed diagnostic error pages are returned from <tt>ninja.NinjaDefault</tt> rather than the typical Result which pulls a template from <tt>system/views</tt>.</p>
<p>For example, in versions prior to 4.0.7, if your controller class method threw an <tt>Exception</tt> then the default behavior of <tt>ninja.NinjaDefault</tt> was to catch it in the <tt>onException</tt> method and return a Result using the template <tt>views/system/500internalServerError.ftl.html</tt>. The default system views are basic and more intended for use in production than during development.</p>
<p>As of version 4.0.7, the default behavior of all the methods in <tt>ninja.NinjaDefault</tt> are to first check if dev mode is on and if <tt>NinjaProperties.areDiagnosticsEnabled()</tt> is true. If both are true then a <tt>Result</tt> is returned with the renderable set to a <tt>DiagnosticError</tt> instance. Since <tt>DiagnosticError</tt> implements <tt>Renderable</tt> &#x2013; it knows how to render itself to the output stream and it will bypass the <tt>TemplateEngine</tt>.</p>
<p>Diagnostic mode is disabled automatically in PROD/TEST modes, but it can also be disabled in DEV mode. Simply add the following to your <tt>application.conf</tt>:</p>

<div class="source">
<pre>application.diagnostics=false
</pre></div></div>
<div class="section">
<h2>Retaining diagnostic mode if you provide conf.Ninja<a name="Retaining_diagnostic_mode_if_you_provide_conf.Ninja"></a></h2>
<p>If you provide your own conf.Ninja and extend ninja.NinjaDefault, then you will likely lose diagnostic mode for the particular methods you override. You can retain the feature, by calling the super method and conditionally returning its result, rather than your own.</p>

<div>
<pre class="prettyprint">
public class Ninja extends NinjaDefault {

    @Override
    public Result getInternalServerErrorResult(Context context, Exception exception) {
        if (isDiagnosticsEnabled()) {
            return super.getInternalServerErrorResult(context, exception);
        }

        // your impl only active in test/prod or dev (with diagnostic disabled)
    }

}
</pre></div></div>
<div class="section">
<h2>Configuring application&#x2019;s base package<a name="Configuring_applications_base_package"></a></h2>
<p>If you&#x2019;d like to keep all Java code in specific package you can define </p>
<div>
<pre class="prettyprint"> application.modules.package=com.someorganinization.somepackage </pre></div>
<p>In this case you must put your Routes at </p>
<p><tt>com.someorganization.somepackage.conf.Routes.java</tt> </p>
<p>and Guice application configuration modules at</p>
<p><tt>com.someorganization.somepackage.conf.Module.java</tt></p>
<p><tt>com.someorganization.somepackage.conf.ServletModule.java</tt></p>
<p>accordingly.</p></div>
<div class="section">
<h2>External configuration for deployment<a name="External_configuration_for_deployment"></a></h2>
<p>When running on a server you may want to use a completely different configuration. This can be accomplished by setting a Java system property:</p>

<div>
<pre class="prettyprint">
java -Dninja.external.configuration=conf/production.conf
</pre></div>
<p>This tells Ninja to load conf/production.conf. It will also load conf/application.conf as usual, but values in conf/production.conf will overwrite values in conf/application.conf.</p>
<p>That way you can manage a production configuration separately from your project. You may want to do this for instance when your server secret should only be available to a certain set of people and not the world. Or if your cloud hoster uses a completely different configuration from prod, test or dev.</p>
<p>Ninja tries to load the file specified in <tt>ninja.external.configuration</tt> from several locations:</p>
<p>It tries to load in the following order:</p>

<ul>
  
<li>From a URL.</li>
  
<li>From an absolute file path.</li>
  
<li>From a relative file path.</li>
  
<li>From the user&#x2019;s home dir.</li>
  
<li>From the classpath.</li>
</ul>
<p>Ninja uses the excellent Apache Configurations library to do the loading. Please refer to <a class="externalLink" href="javascript:if(confirm('http://commons.apache.org/configuration/userguide/howto_filebased.html  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://commons.apache.org/configuration/userguide/howto_filebased.html#Loading'" tppabs="http://commons.apache.org/configuration/userguide/howto_filebased.html#Loading">their manual</a> for more information.</p></div>
<div class="section">
<h2>System properties to override<a name="System_properties_to_override"></a></h2>
<p>As of Ninja v6.1.1, system properties can override any configuration key set with your standard conf/application.conf or external configuration file. For example, if you have a key <tt>db.connection.password</tt> set to <tt>mypass</tt> in <tt>conf/production.conf</tt>, then you can override it via a system property to <tt>otherpass</tt> at runtime like so:</p>

<div>
<pre class="prettyprint">
java -Dninja.external.configuration=conf/production.conf -Ddb.connection.password=otherpass
</pre></div>
<p>Prefixed system properties are honored as well. Using the previous example, if you only wanted the property to take effect while in <tt>test</tt> mode you can do this:</p>

<div>
<pre class="prettyprint">
java -Dninja.external.configuration=conf/production.conf -D%test.db.connection.password=otherpass
</pre></div></div>
<div class="section">
<h2>Hot-reloading external configuration<a name="Hot-reloading_external_configuration"></a></h2>
<p>By default Ninja does not reload your external configuration. However for some installations it may be very useful to hot-reload this config instead of restarting your application.</p>

<div class="source">
<pre>java -Dninja.external.reload=true -Dninja.external.configuration=conf/production.conf
</pre></div>
<p>This tells Ninja to reload your configuration if it is modified during runtime.</p></div>
<div class="section">
<h2>Referencing environment variables in configuration files<a name="Referencing_environment_variables_in_configuration_files"></a></h2>
<p>You can reference system properties inside your configuration files by using the default apache commons configuration syntax:</p>

<div class="source">
<pre>%prod.db.connection.password=${env:DB_PASSWORD}
</pre></div>
<p>That&#x2019;s especially handy when it comes to production credentials that should not be known inside your application code.</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    2019
                        <a href="index.html" tppabs="http://www.ninjaframework.org/">ninjaframework</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>

<!-- Mirrored from ninja.allexample.com/configuration_and_modes.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 14 Oct 2019 15:10:03 GMT -->
</html>
